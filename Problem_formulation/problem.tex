\section{Problem Formulations}
\label{sec:problem}

\subsection{Single MapReduce Query}

\subsubsection*{Minimize WAN usage}

When minimizing WAN usage for a MapReduce data shuffle we have the following optimization problem:
\begin{subequations}
	\begin{align}
		\min_{r} \quad & \sum_{i}\sum_{j\neq i}D_{i}r_{j} \\
		\text{s.t.} \quad & \sum_{j}r_{j} = 1 \\
		& r_{j} \geq 0 \quad \forall j
	\end{align}
\end{subequations}

\subsubsection*{Feasibility to meet deadline}

We want to find a feasible $r$ so that the data shuffle finishes at or before $t$:
\begin{subequations}
	\begin{align}
		\text{find } r \text{ s.t.} \quad & \dfrac{D_{i}r_{j}}{B_{i}^{j}} \leq t - s \quad \forall (i,j):j\neq i \\
		& \sum_{j}r_{j} = 1 \\
		& r_{j} \geq 0 \quad \forall j
	\end{align}
\end{subequations}

\subsubsection*{Minimize WAN usage given a shuffle deadline}
When minimizing WAN usage for a MapReduce data shuffle for a given deadline $t$ we have the following optimization problem:
\begin{subequations}\label{eq:opt_1Q_MR_WAN_deadline}
	\begin{align}
		\min_{r} \quad & \sum_{i}\sum_{j\neq i}D_{i}r_{j} \\
		\text{ s.t.} \quad & \dfrac{D_{i}r_{j}}{B_{i}^{j}} \leq t - s \quad \forall (i,j):i\neq j \\
		& \sum_{j}r_{j} = 1 \\
		& r_{j} \geq 0 \quad \forall j
	\end{align}
\end{subequations}

The objective function can be reformulated to:
\begin{align}
	\sum_{i}\sum_{j\neq i}D_ir_j = \sum_{i}D_i\sum_{j}r_j - \sum_{j}D_jr_j =\sum_{i}D_i - \sum_{j}D_jr_j
\end{align}