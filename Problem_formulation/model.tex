\section{Model}
\label{sec:model}

Let $\mathcal{L}$ be the set of sites that holds data and runs tasks.
For each inter-site WAN link, let $B_{i}^{j}$ be the bandwidth from site $i\in\mathcal{L}$ to site $j\in\mathcal{L}$.
We assume that the bandwidths are stable within the time frame of doing real-time data analytics.

\subsection{Single MapReduce Query}
We perform the map tasks at the sites that contain the associated data and denote $D_{i}$ as the output data from all of the map tasks at site $i$.
The fraction of reduce tasks assigned to site $j$ is denoted as $r_{j}$ which is also the fraction of all other sites' data that must be transfered through the WAN to $j$.
This means that the total WAN usage is for a given task distribution $r$ is:
\begin{align}
	\sum_{i}\sum_{j\neq i}D_{i}r_{j}
\end{align}

If we are given a start time $s$ after the map steps are all completed and a data shuffle deadline $t$ for the reduce tasks, then the completion time is bounded as such:
\begin{align}
	s + \max_{(i,j):j\neq i} \left\{\dfrac{D_{i}r_{j}}{B_{i}^{j}}\right\} \leq t
\end{align}
which is caused by the heterogeneous WAN bandwidth and has a bottlenecking link(s).
We assume that $t>s$.